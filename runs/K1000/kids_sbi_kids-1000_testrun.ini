[DEFAULT]
MY_PATH       = ~
CSL_PATH      = %(MY_PATH)s/kids_sbi/cosmosis-standard-library/
KIDS_SBI_PATH = %(MY_PATH)s/kids_sbi/
INPUT_FOLDER  = %(MY_PATH)s/kids_sbi/data/KiDS/K1000
RESULTS_PATH  = %(MY_PATH)s/kids_sbi/data/kids_sbi_out

run_tag      = testrun0

[pipeline]
modules = sample_S8 sigma8toAs one_parameter_hmcode camb extrapolate_power arbitrary_shells non_limber_projection lognormal_sim salmo_novd shear_bias_novd recover_fields_novd remove_noise_novd cl_to_bandpower_novd salmo shear_bias recover_fields remove_noise cl_to_bandpower load_nz_fits source_photoz_bias linear_alignment projection add_intrinsic mixing_matrix cl_to_bandpower_theory
values = kids1000.ini
priors = 
extra_output = cosmological_parameters/S_8 cosmological_parameters/sigma_8 cosmological_parameters/omega_m cosmological_parameters/omega_nu cosmological_parameters/omega_lambda cosmological_parameters/cosmomc_theta
quiet = F
timing = T
debug = T

[runtime]
sampler = test

[test]
save_dir=%(RESULTS_PATH)s/cosmology_tests/%(run_tag)s

[grid]
nsample_dimension = 1
save=%(RESULTS_PATH)s/cosmology_tests/%(run_tag)s

[hypercube]
nsample_dimension = 40
hypercube_iterations = 1000
save = %(RESULTS_PATH)s/glass/salmo_test/glass_22_test

[output]
filename = %(RESULTS_PATH)s/glass/salmo_test/out_glass_%(run_tag)s
format = text

[sample_S8]
file=%(KIDS_SBI_PATH)s/utils/sample_S8.py

[sigma8toAs]
file = %(KIDS_SBI_PATH)s/utils/sigma8toAs.py

[one_parameter_hmcode]
file = %(KIDS_SBI_PATH)s/utils/one_parameter_hmcode.py
a_0 = 0.98
a_1 = -0.12

[camb]
file = %(KIDS_SBI_PATH)s/cosmosis-standard-library/boltzmann/pycamb/camb_interface.py
do_reionization = F
mode = transfer
nonlinear = pk
halofit_version = mead
neutrino_hierarchy = normal
kmax = 20.0
zmid = 2.0
nz_mid = 50
zmax = 6.0
nz = 150
background_zmax = 6.0
background_zmin = 0.0
background_nz = 6000
transfer_verbose = 1

[extrapolate_power]
file = %(KIDS_SBI_PATH)s/cosmosis-standard-library/boltzmann/extrapolate/extrapolate_power.py
kmax = 500.0

[arbitrary_shells]
file = %(KIDS_SBI_PATH)s/utils/arbitrary_shells.py
data_sets = matter
matter_shell_shape = tophat
matter_shell_mean = 0.01950889988481, 0.0585266996544, 0.0977958299570, 0.1379433101669, 0.1791652805527, 0.2351596639561, 0.3069221296198, 0.381742052215, 0.459979589941, 0.539608695474, 0.620812414851, 0.706203733194, 0.816599228697, 0.955525416780, 1.106821887005, 1.272479704112, 1.45485005009, 1.656728376087, 1.881462389952
matter_shell_width = 0.01950889988481, 0.01950889988481, 0.01976023041783, 0.02038724979205, 0.02083472059376, 0.035159662809, 0.0366028028541, 0.0382171197411, 0.040020417985, 0.03960868754810, 0.0415950318284, 0.043796286514, 0.0665992089883, 0.0723269790943, 0.0789694911305, 0.0866883259768, 0.095682020007, 0.1061963059839, 0.1185377078810
resolution = 6000

[non_limber_projection]
file = %(KIDS_SBI_PATH)s/utils/nonlimber_glass.py
ell_min = 2
ell_max = 30000
n_ell = 1000
ell_nonlimber = 1200 ;max ell of non-Limber domain
ell_limber = 30000 ;max ell of 2nd-order limber domain
shell_input = shell_matter
max_number_subintervals = 30
N_nonlimber = 200
N_interp = 800

[lognormal_sim]
file = %(KIDS_SBI_PATH)s/utils/lognormal_sim.py
out = shear ;only shear supported
out_mode = salmo ;pcl, map, cat and/or salmo
out_folder =  %(RESULTS_PATH)s/glass
prefix = KL_22
runTag = %(run_tag)s
ia = nla ;only nla supported
nside = 1024
nside_out = 1024
;seed = %(seed_number)s

[shift_nz_source]
file = %(KIDS_SBI_PATH)s/utils/shift_nz.py
doVariableDepth = 1 ;0 = no, 1 = yes
nbTomo = 5
N_depth = 10
nOfZPath = %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split1/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO1_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split2/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO1_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split3/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO1_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split4/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO1_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split5/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO1_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split6/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO1_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split7/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO1_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split8/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO1_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split9/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO1_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split10/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO1_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split1/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO2_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split2/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO2_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split3/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO2_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split4/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO2_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split5/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO2_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split6/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO2_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split7/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO2_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split8/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO2_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split9/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO2_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split10/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO2_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split1/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO3_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split2/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO3_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split3/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO3_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split4/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO3_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split5/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO3_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split6/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO3_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split7/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO3_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split8/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO3_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split9/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO3_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split10/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO3_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split1/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO4_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split2/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO4_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split3/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO4_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split4/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO4_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split5/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO4_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split6/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO4_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split7/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO4_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split8/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO4_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split9/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO4_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split10/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO4_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split1/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO5_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split2/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO5_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split3/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO5_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split4/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO5_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split5/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO5_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split6/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO5_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split7/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO5_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split8/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO5_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split9/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO5_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split10/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO5_Nz_recalibrated.ascii
; if doVariableDepth = 1, nOfZPath must be in the order compatible with bin_depth, a_n_gal, b_n_gal, a_sigma_eps and b_sigma_eps as they will be given in the SALMO module
; i.e. if there are 10 different depth bins for 5 different source bins, nOfZPath must have 5x10 paths in the order of ascending bin_depth and ascending redshift in SALMO



[salmo] ;all variable names and input formats are equivalent to the ones useds in SALMO .par files
file = %(KIDS_SBI_PATH)s/utils/add_salmo.py
build_path = %(MY_PATH)s/salmo/build/
seed = random
nbTypes = 4 ;number of fields without variable depth
maskPath = %(INPUT_FOLDER)s/lenses/masks/mask_BOSS_wcs_1024.fits %(INPUT_FOLDER)s/lenses/masks/mask_2dFLenS_wcs_1024.fits %(INPUT_FOLDER)s/lenses/masks/mask_BOSS_wcs_1024.fits %(INPUT_FOLDER)s/lenses/masks/mask_2dFLenS_wcs_1024.fits
nOfZPath = %(INPUT_FOLDER)s/lenses/nofzs/nOfZ_hist_BOSS_wcs_tomo0.dat %(INPUT_FOLDER)s/lenses/nofzs/nOfZ_hist_2dFLenS_wcs_tomo0.dat %(INPUT_FOLDER)s/lenses/nofzs/nOfZ_hist_BOSS_wcs_tomo1.dat %(INPUT_FOLDER)s/lenses/nofzs/nOfZ_hist_2dFLenS_wcs_tomo1.dat
n_gal = 0.0 0.0 0.0 0.0 ;in arcmin^-2
sigma_eps = 0.0 0.0 0.0 0.0
doLensing = 0 0 0 0
doNoise = 2 ;0 = no, 1 = yes, 2 = output both
doWgt = 1 ;0 = no, 1 = yes
signConv = 1 ;0 = athena, 1 = treecorr
outPrefix = %(RESULTS_PATH)s/salmo/sbi/vd/galCat_run
outStyle = 64 ;1 = all galaxies in one file, 2 = two files, one w/ lensing, one w/o, 64 = one file per type (64 is required by utils/fields.py)
doVariableDepth = 1 ;0 = no, 1 = yes
nbDepthMaps = 2 ;number of variable depth maps
depthMapPath = %(INPUT_FOLDER)s/sources/levelmaps/LevelMap_KiDS1000_1024_N.fits %(INPUT_FOLDER)s/sources/levelmaps/LevelMap_KiDS1000_1024_S.fits
N_depth = 10 ;number of depth bins
bin_depth = 1.6951481 2.328295 2.566426 2.804556 3.042676 3.280805 3.5189362 3.757055 3.995186 4.233317 12.95638978 ;bin edge values in depth
nbTomo = 5 ;number of tomographic bins in sample with variable depth
a_n_gal = -0.035002 -0.041813 -0.242983 -0.250177 -0.416808 ;slope of linear fit of n_gal vs. depth
b_n_gal = 0.717425 1.300479 2.577931 2.010033 2.564117 ;intercept of linear fit of n_gal vs. depth
a_sigma_eps = 0.001811 0.0013 -0.000859 -0.00062 0.002394 ;slope of linear fit of n_gal vs. depth
b_sigma_eps = 0.266639 0.256873 0.279306 0.255245 0.261484 ;slope of linear fit of n_gal vs. depth
VD_nOfZPath = %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split1/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO1_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split2/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO1_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split3/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO1_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split4/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO1_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split5/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO1_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split6/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO1_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split7/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO1_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split8/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO1_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split9/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO1_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split10/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO1_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split1/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO2_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split2/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO2_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split3/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO2_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split4/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO2_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split5/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO2_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split6/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO2_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split7/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO2_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split8/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO2_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split9/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO2_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split10/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO2_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split1/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO3_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split2/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO3_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split3/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO3_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split4/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO3_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split5/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO3_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split6/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO3_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split7/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO3_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split8/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO3_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split9/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO3_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split10/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO3_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split1/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO4_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split2/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO4_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split3/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO4_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split4/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO4_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split5/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO4_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split6/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO4_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split7/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO4_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split8/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO4_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split9/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO4_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split10/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO4_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split1/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO5_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split2/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO5_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split3/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO5_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split4/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO5_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split5/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO5_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split6/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO5_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split7/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO5_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split8/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO5_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split9/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO5_Nz_recalibrated.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_split10/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO5_Nz_recalibrated.ascii
out_name = salmo ;name for datablock
clean = T ;if clean = T, will delete all input .fits from GLASS/FLASK files once it has finished running
source_shifts = F ;true if source nofz's mean has been shifted
clean_deltaz = F ;removes temporary delta_z shifted redshift distributions

[shear_bias] ;values from Giblin et al. 2020
file =  %(KIDS_SBI_PATH)s/utils/add_shear_bias.py
section_name = shear_bias
biases = multiplicative, additive, psf
mult_bias_mean = -0.009 -0.011 -0.015 0.002 0.007
mult_bias_std = 0.019 0.020 0.017 0.012 0.010
add_bias_mean_e1 = 0.000124 0.000021 0.000376 0.000041 -0.000457
add_bias_std_e1 = 0.000209 0.00014 0.000112 0.000129 0.000129
add_bias_mean_e2 = 0.00017 0.000525 0.000654 0.000831 0.000697
add_bias_std_e2 = 0.000206 0.000134 0.000111 0.000126 0.000126
psf_bias_mean_e1 = -0.0021 0.0175 0.0077 0.0425 -0.0311
psf_bias_std_e1 = 0.0136 0.0095 0.0076 0.0113 0.0085
psf_bias_mean_e2 = 0.0166 0.0045 0.0102 0.0475 -0.0362
psf_bias_std_e2 = 0.0142 0.0093 0.0079 0.0089 0.0083
psf_ell_map_paths = %(INPUT_FOLDER)s/sources/psfellmaps/psf_e1_Map_KiDS1000_1024_ALL.fits %(INPUT_FOLDER)s/sources/psfellmaps/psf_e2_Map_KiDS1000_1024_ALL.fits
;always have to give 2 psf_ell_map_paths: one for e1 and another for e2 (IN THAT ORDER!)
;make sure that the nside of these maps is compatible with any maps used later on

[recover_fields]
file = %(KIDS_SBI_PATH)s/utils/fields.py
in_name = salmo ;name of input datablock
out = shear ;only shear supported
out_mode = pcl, map ;pcl and/or map
out_name = shear_pcl
doVariableDepth = T
weight_maps = %(INPUT_FOLDER)s/sources/masks/mask_KiDS_North_1024.fits %(INPUT_FOLDER)s/sources/masks/mask_KiDS_South_1024.fits
shear_bias = T
shear_bias_section_name = shear_bias
corrected_biases = multiplicative, additive
nside = 1024
lmax = 2048
clean = T ;if clean = T, will delete all input .fits files from SALMO

[remove_noise]
file = %(KIDS_SBI_PATH)s/utils/remove_noise.py
where = shear
in_name = shear_pcl
min_ell_noise = 200
out_name = shear_pcl_noiseless

[cl_to_bandpower]
file = %(KIDS_SBI_PATH)s/utils/bandpower_sum.py
num_bands = 8
min_ell = 76
max_ell = 1500
in_name = shear_pcl_noiseless
out_name = bandpowers

[shift_nz_source_novd]
file = %(KIDS_SBI_PATH)s/utils/shift_nz.py
doVariableDepth = 0 ;0 = no, 1 = yes
nbTomo = 5
nOfZPath = %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_ALL/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO1_Nz.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_ALL/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO1_Nz.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_ALL/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO2_Nz.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_ALL/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO2_Nz.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_ALL/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO3_Nz.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_ALL/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO3_Nz.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_ALL/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO4_Nz.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_ALL/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO4_Nz.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_ALL/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO5_Nz.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_ALL/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO5_Nz.ascii
; if doVariableDepth - 0, nOfZPath must be in the order and with the necessary repetitions compatible with maskPath of the source field as they will be given in the SALMO module
; i.e. if there are 2 different masks for 5 different source bins, nOfZPath must have 2x5 paths in an order that matches the masks of the source fields given in maskPath in SALMO

[salmo_novd] ;all variable names and input formats are equivalent to the ones useds in SALMO .par files
file = %(KIDS_SBI_PATH)s/utils/add_salmo.py
build_path = %(MY_PATH)s/salmo/build/
seed = random
nbTypes = 14 ;number of fields without variable depth
maskPath = %(INPUT_FOLDER)s/lenses/masks/mask_BOSS_wcs_1024.fits %(INPUT_FOLDER)s/lenses/masks/mask_2dFLenS_wcs_1024.fits %(INPUT_FOLDER)s/lenses/masks/mask_BOSS_wcs_1024.fits %(INPUT_FOLDER)s/lenses/masks/mask_2dFLenS_wcs_1024.fits %(INPUT_FOLDER)s/sources/masks/mask_binary_KiDS_North_1024.fits %(INPUT_FOLDER)s/sources/masks/mask_binary_KiDS_South_1024.fits %(INPUT_FOLDER)s/sources/masks/mask_binary_KiDS_North_1024.fits %(INPUT_FOLDER)s/sources/masks/mask_binary_KiDS_South_1024.fits %(INPUT_FOLDER)s/sources/masks/mask_binary_KiDS_North_1024.fits %(INPUT_FOLDER)s/sources/masks/mask_binary_KiDS_South_1024.fits %(INPUT_FOLDER)s/sources/masks/mask_binary_KiDS_North_1024.fits %(INPUT_FOLDER)s/sources/masks/mask_binary_KiDS_South_1024.fits %(INPUT_FOLDER)s/sources/masks/mask_binary_KiDS_North_1024.fits %(INPUT_FOLDER)s/sources/masks/mask_binary_KiDS_South_1024.fits
nOfZPath = %(INPUT_FOLDER)s/lenses/nofzs/nOfZ_hist_BOSS_wcs_tomo0.dat %(INPUT_FOLDER)s/lenses/nofzs/nOfZ_hist_2dFLenS_wcs_tomo0.dat %(INPUT_FOLDER)s/lenses/nofzs/nOfZ_hist_BOSS_wcs_tomo1.dat %(INPUT_FOLDER)s/lenses/nofzs/nOfZ_hist_2dFLenS_wcs_tomo1.dat %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_ALL/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO1_Nz.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_ALL/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO1_Nz.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_ALL/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO2_Nz.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_ALL/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO2_Nz.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_ALL/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO3_Nz.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_ALL/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO3_Nz.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_ALL/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO4_Nz.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_ALL/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO4_Nz.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_ALL/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO5_Nz.ascii %(INPUT_FOLDER)s/sources/nofzs/N_of_z_for_different_level_bins/GoldClasses_Level_DensitySplit_10_ALL/K1000_NS_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_THELI_INT_DIRcols_Fid_blindC_TOMO5_Nz.ascii
n_gal = 0.0 0.0 0.0 0.0 0.6164 0.6164 1.1821 1.1821 1.8541 1.8541 1.2592 1.2592 1.3109 1.3109 ;in arcmin^-2
sigma_eps = 0.0 0.0 0.0 0.0 0.2721 0.2721 0.2608 0.2608 0.2767 0.2767 0.2534 0.2534 0.2684 0.2684
doLensing = 0 0 0 0 1 1 1 1 1 1 1 1 1 1
doNoise = 2 ;0 = no, 1 = yes, 2 = output both
doWgt = 1 ;0 = no, 1 = yes
signConv = 1 ;0 = athena, 1 = treecorr
outPrefix = %(RESULTS_PATH)s/salmo/sbi/novd/galCat_run
outStyle = 64 ;1 = all galaxies in one file, 2 = two files, one w/ lensing, one w/o, 64 = one file per type (64 is required by utils/fields.py)
doVariableDepth = 0 ;0 = no, 1 = yes
out_name = salmo_novd ;name of datablock
clean = F ;if clean = T, will delete all input .fits from GLASS/FLASK files once it has finished running
source_shifts = F ;true if source nofz's mean has been shifted
clean_deltaz = F ;removes temporary delta_z shifted redshift distributions

[shear_bias_novd] ;values from Giblin et al. 2020
file =  %(KIDS_SBI_PATH)s/utils/add_shear_bias.py
section_name = shear_bias_novd
biases = multiplicative
mult_bias_mean = -0.009 -0.011 -0.015 0.002 0.007
mult_bias_std = 0.019 0.020 0.017 0.012 0.010

[recover_fields_novd]
file = %(KIDS_SBI_PATH)s/utils/fields.py
in_name = salmo_novd ;name of input datablock
out = shear ;only shear supported
out_mode = pcl, map ;pcl and/or map
out_name = shear_pcl_novd
doVariableDepth = F
weight_maps = %(INPUT_FOLDER)s/sources/masks/mask_KiDS_North_1024.fits %(INPUT_FOLDER)s/sources/masks/mask_KiDS_South_1024.fits
shear_bias = T
shear_bias_section_name = shear_bias_novd
corrected_biases = multiplicative, additive
nside = 1024
lmax = 2048
clean = T ;if clean = T, will delete all input .fits files from SALMO

[remove_noise_novd]
file = %(KIDS_SBI_PATH)s/utils/remove_noise.py
where = shear
in_name = shear_pcl_novd
min_ell_noise = 200
out_name = shear_pcl_novd_noiseless

[cl_to_bandpower_novd]
file = %(KIDS_SBI_PATH)s/utils/bandpower_sum.py
num_bands = 8
min_ell = 76
max_ell = 1500
in_name = shear_pcl_novd_noiseless
out_name = bandpowers_novd


; THEORY CALCULATIONS

[load_nz_fits]
file = %(KIDS_SBI_PATH)s/cosmosis-standard-library/number_density/load_nz_fits/load_nz_fits.py
nz_file = %(INPUT_FOLDER)s/sources/nofzs/xipm_KIDS1000_BlindC_with_m_bias_V1.0.0A_ugriZYJHKs_photoz_SG_mask_LF_svn_309c_2Dbins_v2_goldclasses_Flag_SOM_Fid.fits
data_sets = SOURCE

[source_photoz_bias]
file = %(KIDS_SBI_PATH)s/cosmosis-standard-library/number_density/photoz_bias/photoz_bias.py
mode = additive
sample = nz_SOURCE
bias_section = nofz_shifts
interpolation = cubic
output_deltaz = T
output_section_name = delta_z_out

[projection]
file = %(KIDS_SBI_PATH)s/cosmosis-standard-library/structure/projection/project_2d.py
ell_min = 2.0
ell_max = 5000.0
n_ell = 4999
shear-shear = SOURCE-SOURCE 
shear-intrinsic = SOURCE-SOURCE 
intrinsic-intrinsic = SOURCE-SOURCE
verbose = F
get_kernel_peaks = F

[add_intrinsic]
file=%(KIDS_SBI_PATH)s/cosmosis-standard-library/shear/add_intrinsic/add_intrinsic.py
position-shear=False

[linear_alignment]
file = %(KIDS_SBI_PATH)s/cosmosis-standard-library/intrinsic_alignments/la_model/linear_alignments_interface.py
method = bk_corrected

[mixing_matrix]
file = %(KIDS_SBI_PATH)s/utils/recover_cl.py
out = shear
nside = 1024
l_max = 2048
in_name = shear_cl
out_name = shear_pcl_theory
mm_mask = /share/rcifdata/mwietersheim/data/KiDS/masks/kids_1000_mask_block_mixing_matrix_2048_EEtoEE_EEtoBB_EBtoEB_l1max=4096_l2max=4096.npz
mm_sampling_prefix =  /share/rcifdata/mwietersheim/data/KiDS/masks/kids_1000_noise_block_mixing_matrix_1024_EEtoEE_EEtoBB_EBtoEB_l1max=2048_l2max=2048_bins

[cl_to_bandpower_theory]
file = %(KIDS_SBI_PATH)s/utils/bandpower_sum.py
num_bands = 8
min_ell = 76
max_ell = 1500
in_name = shear_pcl_theory
out_name = bandpowers_theory